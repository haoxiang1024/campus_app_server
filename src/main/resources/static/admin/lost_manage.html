<div class="animation-fadeIn">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="m-0">失物信息管理</h4>
        <button class="btn btn-warning btn-sm text-white"><i class="fa fa-plus me-1"></i>登记丢失信息</button>
    </div>

    <div class="table-card">
        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead class="table-light">
                <tr>
                    <th>物品名称</th>
                    <th>丢失地点</th>
                    <th>发布时间</th>
                    <th>联系人</th>
                    <th>状态</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody id="lostTableBody">
                <tr><td colspan="6" class="text-center">数据加载中...</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    (function() {
        // 请求后端获取所有失物数据
        $.ajax({
            url: '/school/admin/getAllLost',
            type: 'GET',
            success: function(res) {
                if(res.status === 0) {
                    renderLostTable(res.data);
                } else {
                    $('#lostTableBody').html('<tr><td colspan="6" class="text-center text-danger">数据获取失败：' + res.msg + '</td></tr>');
                }
            },
            error: function() {
                $('#lostTableBody').html('<tr><td colspan="6" class="text-center text-danger">服务器连接失败</td></tr>');
            }
        });

        function renderLostTable(data) {
            if (!data || data.length === 0) {
                $('#lostTableBody').html('<tr><td colspan="6" class="text-center">暂无失物记录</td></tr>');
                return;
            }
            let html = '';
            data.forEach(item => {
                html += `<tr>
                    <td><span class="fw-bold">${item.itemName}</span></td>
                    <td><i class="fa fa-map-marker-alt text-danger me-1"></i>${item.location}</td>
                    <td>${item.createTime || '未记录'}</td>
                    <td>${item.userName || '匿名'}</td>
                    <td><span class="badge bg-warning">寻找中</span></td>
                    <td>
                        <button class="btn btn-sm btn-link text-primary p-0 me-2">详情</button>
                        <button class="btn btn-sm btn-link text-danger p-0">删除</button>
                    </td>
                </tr>`;
            });
            $('#lostTableBody').html(html);
        }
    })();
</script>