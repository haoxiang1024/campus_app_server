<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>校园失物招领后台</title>
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/all.min.css" rel="stylesheet">
    <link href="./css/sweetalert2.min.css" rel="stylesheet">
    <link rel="icon" href="./svgs/favicon/favicon.svg" type="image/x-icon" >

    <style>

        :root { --sky-blue: #00aaff; --bg-color: #f0f8ff; --sidebar-dark: #2c3e50; }
        body { font-size: .875rem; background-color: var(--bg-color); overflow-x: hidden; }
        .navbar { background: #fff !important; border-bottom: 2px solid var(--sky-blue); height: 56px; z-index: 1001; }
        .navbar-brand { color: var(--sky-blue) !important; font-weight: bold; }
        .sidebar { position: fixed; top: 0; bottom: 0; left: 0; width: 240px; padding-top: 56px; background: var(--sidebar-dark); z-index: 1000; }
        .sidebar .nav-link { color: #bdc3c7; margin: 5px 15px; border-radius: 8px; padding: 10px 15px; cursor: pointer; }
        .sidebar .nav-link.active { background: var(--sky-blue); color: #fff !important; }
        .main-content { margin-left: 240px; padding: 25px; width: calc(100% - 240px); box-sizing: border-box; min-height: 100vh; }
    </style>
</head>
<body>

<script>
    // 权限与用户名检查
    (function() {
        const data = sessionStorage.getItem("user");
        if (!data) { window.location.href = 'login.html'; return; }
        const user = JSON.parse(data);
        const check = setInterval(function() {
            const el = document.getElementById('adminName');
            if (el) { el.textContent = user.nickname; clearInterval(check); }
        }, 5);
    })();
</script>

<header class="navbar navbar-expand-md sticky-top shadow-sm">
    <a class="navbar-brand px-4" href="#"><svg t="1768996390518" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6429" data-darkreader-inline-fill="" width="32" height="32"><path d="M743.16 759.48H258.09c-55.39 0-100.44-45.06-100.44-100.44V263.51c0-55.39 45.06-100.44 100.44-100.44h485.08c55.39 0 100.44 45.06 100.44 100.44v395.52c0 55.39-45.06 100.45-100.45 100.45zM258.09 227.07c-20.1 0-36.44 16.35-36.44 36.44v395.52c0 20.1 16.35 36.44 36.44 36.44h485.08c20.1 0 36.44-16.35 36.44-36.44V263.51c0-20.1-16.35-36.44-36.44-36.44H258.09zM701.74 870.35H326.78c-17.67 0-32-14.33-32-32s14.33-32 32-32h374.96c17.67 0 32 14.33 32 32s-14.32 32-32 32z" fill="#0782E9" p-id="6430" data-darkreader-inline-fill="" style="--darkreader-inline-fill: var(--darkreader-background-0782e9, #0668ba);"></path><path d="M468.63 536.01c-5.44 0-10.96-1.39-16.01-4.31-15.29-8.86-20.51-28.44-11.65-43.73l63.49-109.61c8.86-15.29 28.44-20.51 43.73-11.65 15.29 8.86 20.51 28.44 11.65 43.73l-63.49 109.61c-5.93 10.23-16.67 15.96-27.72 15.96z" fill="#B7DFFF" p-id="6431" data-darkreader-inline-fill="" style="--darkreader-inline-fill: var(--darkreader-text-b7dfff, #9ad4ff);"></path><path d="M643.89 546.5c-7.64 0-15.31-2.72-21.43-8.24-13.12-11.84-14.16-32.07-2.32-45.2l33.72-37.37-34.51-36.8c-12.09-12.89-11.44-33.14 1.45-45.23s33.14-11.44 45.23 1.45l44.02 46.94c8.41 8.97 13.11 20.68 13.22 32.97a48.747 48.747 0 0 1-12.59 33.22l-43.03 47.69c-6.3 7.01-15.01 10.57-23.76 10.57z m19.48-80.67h0.01-0.01zM367.38 546.5c-8.54 0-17.05-3.39-23.35-10.11l-44.02-46.94c-8.41-8.97-13.11-20.68-13.22-32.97a48.747 48.747 0 0 1 12.59-33.22l43.03-47.7c11.84-13.12 32.07-14.16 45.2-2.32 13.12 11.84 14.16 32.07 2.32 45.2l-33.72 37.37 34.51 36.8c12.09 12.89 11.44 33.14-1.45 45.23a31.91 31.91 0 0 1-21.89 8.66z" fill="#0782E9" p-id="6432" data-darkreader-inline-fill="" style="--darkreader-inline-fill: var(--darkreader-background-0782e9, #0668ba);"></path></svg>校园失物招领管理后台</a>
    <div class="navbar-nav ms-auto align-items-center">
        <span class="nav-link text-dark fw-bold me-4" >昵称:</span>
        <span class="nav-link text-dark fw-bold me-4" id="adminName"></span>
        <a class="btn btn-outline-danger btn-sm me-3" href="#" onclick="logout()"><i class="fa fa-sign-out-alt"></i> 退出</a>
    </div>
</header>

<div class="container-fluid">
    <div class="row">
        <nav class="sidebar">
            <ul class="nav flex-column mt-3">
                <li class="nav-item"><a class="nav-link active" data-page="statistics.html"><i class="fa fa-chart-pie me-2"></i> 数据统计</a></li>
                <li class="nav-item"><a class="nav-link" data-page="user_manage.html"><i class="fa fa-user-friends me-2"></i> 用户管理</a></li>
                <li class="nav-item"><a class="nav-link" data-page="lostandfound_manage.html"><i class="fa fa-search-minus me-2"></i> 失物招领管理</a></li>
                <li class="nav-item"><a class="nav-link" data-page="comment_manage.html"><i class="fa fa-comment-dots me-2"></i> 审核评论</a></li>

            </ul>
        </nav>

        <main class="main-content" id="displayArea">
        </main>
    </div>
</div>

<script src="./js/jquery.min.js"></script>
<script src="./js/bootstrap.bundle.min.js"></script>
<script src="./js/sweetalert2@11.js"></script>

<script>
    $(function() {
        // 初始加载默认页
        loadContent('statistics.html');

        // 点击侧边栏切换
        $('.sidebar .nav-link').click(function() {
            const page = $(this).attr('data-page');
            $('.sidebar .nav-link').removeClass('active');
            $(this).addClass('active');
            loadContent(page);
        });
    });

    // 核心加载函数
    function loadContent(pageName) {
        // 使用 jQuery 的 load 方法动态加载 HTML 片段
        $('#displayArea').load(pageName, function(response, status, xhr) {
            if (status === "error") {
                $('#displayArea').html('<div class="alert alert-danger">页面加载失败: ' + xhr.status + " " + xhr.statusText + '</div>');
            }
        });
    }

    function logout() {
        // 美化弹窗工具封装
        const Toast = {
            // 成功提示（右上角自动消失）
            success: (msg) => {
                Swal.fire({
                    icon: 'success',
                    title: msg,
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 2000,
                    width: '220px', // 强制宽度
                    padding: '0.5rem', // 极简内边距
                });
            },
            // 错误/失败提示（中间弹窗）
            error: (msg) => {
                Swal.fire({
                    icon: 'error',
                    title: '操作失败',
                    text: msg,
                    confirmButtonColor: '#00aaff',
                    width: '320px', // 锁定宽度，不再显得巨大
                    padding: '1.25rem',
                    customClass: {
                        title: 'fs-6', // 使用 Bootstrap 字体类缩小标题
                        htmlContainer: 'small' // 缩小内容字体
                    }
                });
            },
            // 确认对话框
            confirm: (title, text, callback) => {
                Swal.fire({
                    title: title,
                    text: text,
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#00aaff',
                    cancelButtonColor: '#6c757d',
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    width: '350px', // 确认框稍宽一点点以便容纳两个按钮
                    padding: '1.25rem',
                    customClass: {
                        title: 'fs-6',
                        htmlContainer: 'small'
                    }
                }).then((result) => {
                    if (result.isConfirmed) callback();
                });
            }
        };

// 修改后的退出逻辑
        Toast.confirm('确定退出吗？', '您的会话将被清除', () => {
            sessionStorage.clear();
            window.location.href = 'login.html';
        });    }
</script>
</body>
</html>